{% extends "layout.html" %}

{% block title %}
    friends
{% endblock %}

{% block main %}
<div class="container-fluid">
  <form action="/addfriend" method="post">
    <h1 class="h3 mb-3 fw-normal">Please put your friends username in</h1>
    <div class="input-group mb-3">
        <span class="input-group-text">@</span>
        <div class="form-floating">
          <input name="username" type="text" class="form-control" id="floatingInputGroup1" placeholder="Username">
          <label for="floatingInputGroup1">Username</label>
          <datalist>
          </datalist>
          <button class="w-100 btn  btn-primary" type="submit">add friend</button>
        </div>
    </div>
  </form>
    <div class="text-bg-light">
        <table class="table table-dark table-striped">
            <tbody>
                <tr></tr>
            </tbody>                          
        </table>
        <ul></ul>
    </div>
</div>
{% endblock %}
<script>
    let input=document.querySelector('input');
    input.addEventListener("keyup",function(){
      $.post("/friend",input.value,function(friend){
        let html='';
        for (let c in friend)
        {
          let name=friend[c].username;
          html+="<li>" + name +"</li>";
          
        }
        document.querySelector('<ul>').innerHTML=html;
      })      
    })
    
  </script>